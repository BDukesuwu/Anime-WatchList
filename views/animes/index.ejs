<%- include('../partials/header') %>

<table id="list">
  <thead>
    <tr>
      <th>Title</th>
      <th>Release<br>Year</th>
      <th>Genre</th>
      <th>Series<br>Ongoing</th>
      <th>About</th>
      <% if (user) {%> <!--if the user is logged in, they can see the watchlist header-->
        <th>Watched?</th>
      <%}%>
      
    </tr>
  </thead>
  <tbody>
    <% animes.forEach(function(m) { %> <!--make one like this for watchlist index page too-->
      <tr>
        <td><a href="/animes/<%= m._id %>"><%= m.title %></a></td>
        <td><%= m.releaseYear %></td>
        <td><%= m.animeGenre %></td>
        <td><%= m.onGoing ? 'Ongoing' : 'Finished' %></td>
        <td><%= m.animeSynopsis %> </td>

        <% if (user) {%> <!-- if the user is logged in, they can click a btn to add the item to their watchlist-->
            <td><a href="watchlist/form">watch</href></td>
               
            <td><%= m.weebWatching %></td>
          <%}%>
      </tr>
      
      <% }); %>
  </table>

<script>
  function showForm() {
    document.getElementById('watchedForm').style.display = 'hidden';
  }

  function closeForm() {
    document.getElementById("watchedForm").style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function (event) {
  let modal = document.getElementById('loginPopup');
  if (event.target == modal) {
    closeForm();
  }
}
</script>
  
<%- include('../partials/footer') %>
